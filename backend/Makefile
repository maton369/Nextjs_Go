GO_IMAGE=golang:1.24
APP_DIR=$(shell pwd)

get:
	docker run --rm -v "$(APP_DIR)":/app -w /app $(GO_IMAGE) go get $(pkg)

tidy:
	docker run --rm -v "$(APP_DIR)":/app -w /app $(GO_IMAGE) go mod tidy

verify:
	docker run --rm -v "$(APP_DIR)":/app -w /app $(GO_IMAGE) go mod verify

build:
	docker-compose build --no-cache

up:
	docker-compose up -d

down:
	docker-compose down

logs:
	docker-compose logs -f backend

# ğŸ”§ è¿½åŠ ï¼šãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã ã‘ãƒ“ãƒ«ãƒ‰
build-backend:
	docker-compose build --no-cache backend

# ğŸ”§ è¿½åŠ ï¼šãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã ã‘èµ·å‹•
up-backend:
	docker-compose up -d backend

# ğŸ”§ è¿½åŠ ï¼šGoãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´æ™‚ã« backend ã‚’è‡ªå‹•ãƒ“ãƒ«ãƒ‰ï¼†å†èµ·å‹•
watch-backend:
	watchexec -e go -r -w . "make build-backend && make up-backend"
